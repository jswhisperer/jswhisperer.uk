---
import ListCategories from '@/components/ListCategories'
import ListPosts from '@/components/ListPosts'
import BaseLayout from '@/layouts/BaseLayout'
import { siteConfig } from '@/site-config'
import { Picture } from 'astro:assets'
import { getCollection } from 'astro:content'

const MAX_POSTS = 1005 // max number of posts to show on the home page
const posts = await getCollection('blog', { limit: MAX_POSTS })
---

<div class='p-author h-card' style='display: none;'>
	<a rel='author' class='p-name u-url' href=`${Astro.site}/author/greg`>Gregory Benner</a>

	<Picture
		formats={['avif', 'webp']}
		class='u-photo'
		src={import('../assets/images/greg.jpeg')}
		alt='Gregory Benner'
	/>
	<a class='p-org h-card' href='https:/jswhisperer.uk/'>jswhisperer</a>
</div>

<BaseLayout title='Home'>
	<ListCategories />

	<div class='h-feed'>
		<h2 class='text-lg font-medium tracking-wide text-end'>Latest Posts</h2>
		<ListPosts FirstBig={true} posts={posts} />
	</div>
</BaseLayout>
